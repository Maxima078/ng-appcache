!function(){"use strict";function e(e){return["$window","$rootScope","$timeout",function(n,t,a){return{restrict:"EA",compile:function(i,r){i.addClass("ng-hide"),n.applicationCache&&n.applicationCache.addEventListener(e,function(){i.removeClass("ng-hide");var e=t.$eval(r.dismissDelay);e>=0&&a(function(){i.addClass("ng-hide")},e,!0)}),angular.isUndefined(r.dismissOnClick)||i.bind("click",function(){i.addClass("ng-hide")})}}}]}var n={};["cached","checking","downloading","error","noupdate","obsolete","updateready"].map(function(t){n[t]=e(t)}),angular.module("ng-appcache",[]).factory("appcache",["$window","$rootScope","$q","$timeout",function(e,n,t,a){function i(){return t.reject("unsupported")}var r=this;if(e.applicationCache){r.abortUpdate=function(){var n=t.defer();try{e.applicationCache.abort(),n.resolve()}catch(a){if("InvalidStateError"!==a.name&&"INVALID_STATE_ERR"!==a.name)throw a;n.reject(a.name)}return n.promise},r.checkUpdate=function(){var n=t.defer(),i=function(){a(function(){n.resolve()},!0)},c=function(){a(function(){n.reject()},!0)};r.addEventListener("updateready",i),r.addEventListener("noupdate",c),n.promise["finally"](function(){r.removeEventListener("updateready",i),r.removeEventListener("noupdate",c),i=null,c=null});try{e.applicationCache.update()}catch(o){if("InvalidStateError"!==o.name&&"INVALID_STATE_ERR"!==o.name)throw o;n.reject(o.name)}return n.promise},r.swapCache=function(){var n=t.defer();try{e.applicationCache.swapCache(),n.resolve()}catch(a){if("InvalidStateError"!==a.name&&"INVALID_STATE_ERR"!==a.name)throw a;n.reject(a.name)}return n.promise},r.addEventListener=function(n,t,a){a=angular.isUndefined(a)?!1:a,e.applicationCache.addEventListener(n,t,a)},r.removeEventListener=function(n,t,a){a=angular.isUndefined(a)?!1:a,e.applicationCache.removeEventListener(n,t,a)},r.on=r.addEventListener,r.off=r.removeEventListener;var c={0:"UNCACHED",1:"IDLE",2:"CHECKING",3:"DOWNLOADING",4:"UPDATEREADY",5:"OBSOLETE"};n.$watch(function(){return e.applicationCache.status},function(e){r.status=c[e]}),e.applicationCache.addEventListener("error",function(){n.$digest()},!1)}else r.abortUpdate=i,r.checkUpdate=i,r.swapCache=i,r.addEventListener=function(){},r.removeEventListener=function(){},r.on=function(){},r.off=function(){};return r}]).directive("appcacheCached",n.cached).directive("appcacheChecking",n.checking).directive("appcacheDownloading",n.downloading).directive("appcacheError",n.error).directive("appcacheNoupdate",n.noupdate).directive("appcacheObsolete",n.obsolete).directive("appcacheUpdateready",n.updateready)}();